{% assign video_paths = include.videos | split: ", " %}
{% assign gallery_height = include.height | default: "300" %}
{% assign video_radius = include.radius | default: "10" %}

<div class="video-gallery autoplay"
     style="--gallery-height: {{ gallery_height }}px; --video-radius: {{ video_radius }}px;">
  {% for video_path in video_paths %}
    {% assign video_name = video_path | strip %}

    {% if video_name contains 'https://' %}
      <video
        autoplay
        muted
        loop
        playsinline
        preload="none"
        style="height: var(--gallery-height); border-radius: var(--video-radius);"
      >
        <source src="{{ video_name }}" type="video/mp4">
      </video>
    {% else %}
      {% assign page_url_without_index = page.url | remove: 'index' | remove: '.html' %}
      <video
        autoplay
        muted
        loop
        playsinline
        preload="none"
        poster="{{ page_url_without_index }}{{ video_name | replace: '.mp4', '.jpg' }}"
        style="height: var(--gallery-height); border-radius: var(--video-radius);"
      >
        <source src="{{ page_url_without_index }}{{ video_name }}" type="video/mp4">
      </video>
    {% endif %}
  {% endfor %}
</div>
